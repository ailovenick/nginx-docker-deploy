# ==========================================================
# УНИВЕРСАЛЬНАЯ КОНФИГУРАЦИЯ
# ==========================================================
# По умолчанию: HTTP (порт 80) + Статические файлы.
# Для включения PHP: раскомментируйте include ...php_fastcgi.conf
# Для включения SSL: раскомментируйте блок server на 443 порту.
# ==========================================================

server {
    listen 80;
    listen [::]:80;
    server_name localhost;

    # Путь к файлам сайта
    root /var/www/html;
    index index.php index.html index.htm;

    # Логи
    access_log /var/log/nginx/access.log main;
    error_log /var/log/nginx/error.log warn;

    # === [ВАРИАНТ 1] Просто HTTP + Статика (По умолчанию) ===
    # Если включаете PHP (Вариант 2), ЗАКОММЕНТИРУЙТЕ этот блок!
    location / {
        try_files $uri $uri/ =404;
    }

    # === [ВАРИАНТ 2] Включение PHP ===
    # Для включения PHP:
    # 1. Закомментируйте блок location / выше (Вариант 1).
    # 2. Раскомментируйте строки ниже.
    
    # location / {
    #     try_files $uri $uri/ /index.php?$query_string;
    # }
    # include /etc/nginx/snippets/php_fastcgi.conf;

    # === [ВАРИАНТ 3] Редирект на HTTPS ===
    # Если вы настроили SSL, раскомментируйте строку ниже, чтобы перенаправлять всех на HTTPS:
    # return 301 https://$host$request_uri;
}

# ==========================================================
# SSL КОНФИГУРАЦИЯ (HTTPS)
# ==========================================================
# Раскомментируйте ВЕСЬ блок server ниже, если у вас есть сертификаты
# в папке nginx/certs (selfsigned.crt и selfsigned.key)
# ==========================================================

# server {
#     listen 443 ssl;
#     listen [::]:443 ssl;
#     server_name localhost;
#
#     root /var/www/html;
#     index index.php index.html index.htm;
#
#     # Пути к сертификатам (должны лежать в папке nginx/certs проекта)
#     ssl_certificate /etc/nginx/certs/selfsigned.crt;
#     ssl_certificate_key /etc/nginx/certs/selfsigned.key;
#
#     # Подключение настроек безопасности SSL
#     include /etc/nginx/snippets/ssl_params.conf;
#
#     access_log /var/log/nginx/access.log main;
#     error_log /var/log/nginx/error.log warn;
#
#     location / {
#         # Для статики:
#         # try_files $uri $uri/ =404;
#
#         # Для PHP (WordPress, Laravel и т.д.):
#         try_files $uri $uri/ /index.php?$query_string;
#     }
#
#     # === Включение PHP для HTTPS ===
#     include /etc/nginx/snippets/php_fastcgi.conf;
# }
